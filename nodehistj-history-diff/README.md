# NodehistJ - Сравнение версий списков узлов

Модуль для анализа изменений между разными версиями списков узлов.

## Основные возможности

- Сравнение разных версий списков узлов
- Отслеживание истории изменений
- Генерация отчетов о различиях
- Кэширование результатов в Redis (TTL 1 час)

## API Endpoints

Базовый путь: `/diff`

- `GET /diff` - получить различия между версиями
- `GET /history` - получить историю изменений узла
- `POST /compare` - запустить новое сравнение

Пример запроса:

```bash
curl "http://localhost:8080/diff?version1=2023-150&version2=2023-151"
```

## Настройка кэширования

Результаты кэшируются в Redis с TTL 1 час. Ключи кэша:

- Результаты сравнения: `diffResult:версия1:версия2`
- История изменений: `nodeHistory:зона:сеть:узел`

## Переменные окружения

| Переменная | Описание | Обязательно | По умолчанию |
|------------|----------|-------------|--------------|
| `CASSANDRA_HOST` | Хост Cassandra/ScyllaDB | Да | localhost |
| `CASSANDRA_DC` | Имя датацентра | Да | datacenter1 |
| `REDIS_HOST` | Хост Redis | Нет | localhost |
| `MINIO_URL` | URL MinIO | Да | - |
| `MINIO_USER` | Пользователь MinIO | Да | - |
| `MINIO_PASSWORD` | Пароль MinIO | Да | - |

## Рекомендации по использованию

1. Миграционные скрипты находятся в `src/main/resources/db/migration/`

2. Для частых запросов сравнения версий рекомендуется увеличить TTL кэша
